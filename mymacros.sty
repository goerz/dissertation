\ProvidesPackage{mymacros}[2015/05/15
My Macros (c) 2015 Michael Goerz
http://michaelgoerz.net/]

% *******************************************************************
% My Macros (c) 2011 Michael Goerz
%
% This package contains macros for my personal use.
%
%  This file may be distributed and/or modified under the conditions of
%  the LaTeX Project Public License, either version 1.2 of this license
%  or (at your option) any later version.  The latest version of this
%  license is in:
%
%     http://www.latex-project.org/lppl.txt
%
% *******************************************************************


\NeedsTeXFormat{LaTeX2e}
\RequirePackage{amssymb, amsmath, amsfonts, amsthm}
\RequirePackage{accents} % only for \doublehat
\RequirePackage{bbm}     % only for \unity
\RequirePackage{ifthen}
\RequirePackage{graphicx, epsfig}
\usepackage{float}
\usepackage{multirow}

\usepackage{enumitem} % extra options for enumerate/itemize

\usepackage{algorithm}
\usepackage{algpseudocode}
\algrenewcommand\algorithmicrequire{\textbf{Input:}}
\algrenewcommand\algorithmicensure{\textbf{Output:}}
\algnewcommand{\IIf}[1]{\State\algorithmicif\ #1\ \algorithmicthen}
\floatname{algorithm}{Algorithm}

% *******************************************************************

% Color
\RequirePackage{xcolor}

% the following colors match the ones in GoerzDiss.plotting.colors
\definecolor{RydbergRed} {RGB}{171,46,21}
\definecolor{RydbergBlue}{rgb}{136,153,199}
\definecolor{Red}        {rgb}{0.894118, 0.101961, 0.109804}
\definecolor{Blue}       {rgb}{0.215686, 0.494118, 0.721569}
\definecolor{Orange}     {rgb}{1.000000, 0.498039, 0.000000}
\definecolor{Green}      {rgb}{0.301961, 0.686275, 0.290196}
\definecolor{Purple}     {rgb}{0.596078, 0.305882, 0.639216}
\definecolor{Brown}      {rgb}{0.650980, 0.337255, 0.156863}
\definecolor{Pink}       {rgb}{0.968627, 0.505882, 0.749020}
\definecolor{Yellow}     {rgb}{0.823529, 0.823529, 0.082353}
\definecolor{LightRed}   {rgb}{0.984314, 0.603922, 0.600000}
\definecolor{LightBlue}  {rgb}{0.650980, 0.807843, 0.890196}
\definecolor{LightOrange}{rgb}{0.992157, 0.749020, 0.435294}
\definecolor{LightGreen} {rgb}{0.698039, 0.874510, 0.541176}
\definecolor{LightPurple}{rgb}{0.792157, 0.698039, 0.839216}
\definecolor{Grey}       {rgb}{0.600000, 0.600000, 0.600000}

% *******************************************************************

% Units
\RequirePackage{siunitx}

% TikZ
\newcommand{\inputTikZ}[1]{%
  \beginpgfgraphicnamed{#1-external}%
    \input{#1.tikz}%
   \endpgfgraphicnamed%
}

% Checkbox
\newcommand\checkbox{\mbox{%
  \settoheight\fboxsep{X}\setlength\fboxsep{.5\fboxsep}%
  \raisebox\depth{\fbox{}}%
}}

% References
\newcommand{\Eq}[1]{Eq.~(\ref{#1})}

% Simple macros and operator names
\newcommand{\vphi}{\varphi}
\newcommand{\sqrtISWAP}{\sqrt{\text{iSWAP}}}
\newcommand{\sqrtSWAP}{\sqrt{\text{SWAP}}}
\newcommand{\eps}{\varepsilon}
\newcommand{\vectt}[2]{\ensuremath{\begin{pmatrix} #1 \\ #2 \end{pmatrix}}}
\newcommand{\vecttt}[3]{\ensuremath{\begin{pmatrix} #1 \\ #2 \\ #3 \end{pmatrix}}}
\newcommand{\vectttt}[4]{\ensuremath{\begin{pmatrix} #1 \\ #2 \\ #3 \\ #4 \end{pmatrix}}}
\newcommand{\inftyint}{\ensuremath{\int\limits_{-\infty}^{+\infty}}}
\newcommand{\inftysum}[2][0]{\sum\limits_{#2=#1}^{\infty}}
\newcommand{\DynMap}{\mathcal{E}}
\newcommand{\trace}{\operatorname{tr}}
\newcommand{\Tr}{\operatorname{tr}}
\newcommand{\tr}{\operatorname{tr}}
\newcommand{\aux}{\operatorname{aux}}
\newcommand{\rot}{\operatorname{rot}}
\newcommand{\diag}{\operatorname{diag}}
\newcommand{\loss}{\operatorname{loss}}
\newcommand{\norm}{\operatorname{norm}}
\newcommand{\red}{\operatorname{red}}
\newcommand{\abs}{\operatorname{abs}}
\newcommand{\opt}{\operatorname{opt}}
\newcommand{\tgt}{\operatorname{tgt}}
\newcommand{\init}{\operatorname{in}}
\newcommand{\pop}{\operatorname{pop}}
\newcommand{\ryd}{\operatorname{ryd}}
\newcommand{\old}{\operatorname{old}}
\newcommand{\new}{\operatorname{new}}
\newcommand{\avg}{\operatorname{avg}}
\newcommand{\mixed}{\operatorname{mixed}}
\newcommand{\superpos}{\operatorname{sp}}
\newcommand{\up}{\uparrow}
\newcommand{\down}{\downarrow}
\newcommand{\sets}[1]{\mathbb{#1}} % Complex, Real, etc.
\newcommand{\Real}{\mathbb{R}}
\newcommand{\Complex}{\mathbb{C}}
\newcommand{\Integer}{\mathbb{N}}
\newcommand{\daggered}{^\dagger}
\newcommand{\transposed}{^\text{T}}
\newcommand{\unity}{\mathbbm{1}}
\newcommand{\identity}{\mathbbm{1}}
\newcommand{\openone}{\mathbbm{1}}
\newcommand{\dd}{\, \textnormal{d}} % \dd x -> dx in integrals
\newcommand{\ii}{\textnormal{i}} % imaginary i
\newcommand{\ee}{\textnormal{e}} % Euler's number
\newcommand{\deriv}[2][{}]{\frac{\textnormal{d} #1}{\textnormal{d}#2}}
\newcommand{\pderiv}[2][{}]{\frac{\partial #1}{\partial #2}}
\newcommand{\Nabla}[1]{\nabla_{\kern-3pt #1}}
\newcommand{\difquo}[2][{}]{\frac{\textnormal{d} #1}{\textnormal{d}#2}}
\newcommand{\partdifquo}[2][{}]{\frac{\partial #1}{\partial #2}}
\newcommand{\krotovdifquo}[3][{}]{\left.\frac{\partial #1}{\partial #2}\right\vert_{#3}}
\renewcommand{\qed}{\begin{flushright}$\blacksquare$\end{flushright}}
\newcommand{\laplace}{\Delta}
\renewcommand{\Re}{\mathfrak{Re}}
\renewcommand{\Im}{\mathfrak{Im}}
\newcommand{\eff}{\operatorname{eff}}
\newcommand{\lec}{\operatorname{lec}}
\newcommand{\PE}{\operatorname{PE}}
\newcommand{\LI}{\operatorname{LI}}
\newcommand{\FFT}{\operatorname{FFT}}
\newcommand{\SU}{\operatorname{SU}}
\newcommand{\errPE}{\varepsilon_{\PE}}
\newcommand{\errLec}{\varepsilon_{\lec}}
\newcommand{\SigmaX}{\Op{\sigma}_x}
\newcommand{\SigmaY}{\Op{\sigma}_y}
\newcommand{\SigmaZ}{\Op{\sigma}_z}
\newcommand{\SigmaPlus}{\Op{\sigma}_{\!+}}
\newcommand{\SigmaMinus}{\Op{\sigma}_{\!-}}
\newcommand{\epsRef}{\epsilon^{\text{ref}}}
\newcommand{\JTsm}{J_{T,\text{sm}}}
\newcommand{\JTre}{J_{T,\text{re}}}
\newcommand{\dHdEps}{%
  \krotovdifquo[\Op{H}]{\epsilon}{%
  {\scriptsize
  \begin{matrix}\phi^{(i+1)}(t)\\\epsilon^{(i+1)}(t)\end{matrix}}}
}
\newcommand{\dHdOmega}{%
  \krotovdifquo[\Op{H}]{\Omega}{%
  {\scriptsize
  \begin{matrix}\phi^{(i+1)}(t)\\\Omega^{(i+1)}(t)\end{matrix}}}
}
% double hats
\newlength{\dhatheight}
\newcommand{\hhatDS}[1]{%
    \settoheight{\dhatheight}{\ensuremath{\hat{#1}}}%
    \addtolength{\dhatheight}{-0.35ex}%
    \hat{\vphantom{\rule{1pt}{\dhatheight}}%
    \smash{\hat{#1}}}}
\newcommand{\hhatTS}[1]{%
    \settoheight{\dhatheight}{\ensuremath{\hat{#1}}}%
    \addtolength{\dhatheight}{-0.35ex}%
    \hat{\vphantom{\rule{1pt}{\dhatheight}}%
    \smash{\hat{#1}}}}
\newcommand{\hhatS}[1]{%
    \settoheight{\dhatheight}{\ensuremath{\scriptstyle{\hat{#1}}}}%
    \addtolength{\dhatheight}{-0.175ex}%
    \hat{\vphantom{\rule{1pt}{\dhatheight}}%
    \smash{\hat{#1}}}}
\newcommand{\hhatSS}[1]{%
    \settoheight{\dhatheight}{\ensuremath{\scriptscriptstyle{\hat{#1}}}}%
    \addtolength{\dhatheight}{-0.07ex}%
    \hat{\vphantom{\rule{1pt}{\dhatheight}}%
    \smash{\hat{#1}}}}
\newcommand{\doublehat}[1]{\mathchoice{\hhatDS{#1}}{\hhatTS{#1}}{\hhatS{#1}}{\hhatSS{#1}}}

% Brakets and other QM stuff (Adapted from braket.sty)
% Both Liouville space and Hilbert Space
\newcommand{\Liouville}{\mathcal{L}}
\newcommand{\Dissipator}{\mathcal{D}}
\newcommand{\Hilbert}{\mathcal{H}}
\newcommand{\Timeorder}{\mathcal{T}}
\newcommand{\Lie}{\mathfrak{L}}
\newcommand{\LOp}[1]{\boldsymbol{\doublehat{#1}}}
\newcommand{\Liouvillian}{\LOp{\Liouville}}
\newcommand{\Norm}[1]{\left\lVert#1\right\rVert}
\newcommand{\Abs}[1]{\left|#1\right|}
\newcommand{\AbsSq}[1]{\left|#1\right|^2}
\newcommand{\Avg}[1]{\left<#1\right>}
\newcommand{\bra}[1]{\ensuremath{\langle #1 \vert}}  % for normal text
\newcommand{\ket}[1]{\ensuremath{\vert #1 \rangle}}  % for normal text
\newcommand{\Bra}[1]{\left\langle #1 \right\vert}
\newcommand{\KetBra}[2]{\Ket{#1}\kern-0.1em\Bra{#2}}
\newcommand{\Ket}[1]{\left\vert #1 \right\rangle}
\newcommand{\Op}[1]{\ensuremath{\mathsf{\hat{#1}}}}
\newcommand{\tildeOp}[1]{\mathsf{\tilde{#1}}}
\newcommand{\dotOp}[1]{\mathsf{\dot{#1}}}
\newcommand{\vecOp}[1]{\vec{\mathsf{#1}}}
\newcommand{\vOp}[1]{\hat{\vec{\mathsf{#1}}}}
\newcommand{\op}[1]{\Op{#1}}
% Liouville Ket/Bra -- used \Lbra, \Lket for small texts, \LBra, \LKet for large
% texts
\newcommand{\Lbra}[1]{\left\langle\kern-0.2em\left\langle #1 \right\vert\right.}
\newcommand{\Lket}[1]{\left.\left\vert #1 \right\rangle\kern-0.2em\right\rangle}
\newcommand{\LBra}[1]{\left\langle\kern-0.4em\left\langle #1 \right\vert\right.}
\newcommand{\LKet}[1]{\left.\left\vert #1 \right\rangle\kern-0.4em\right\rangle}
% Braket, and Liouville variants
\let\protect\relax
% %%%%%%%%%%%% \Braket %%%%%%%%%
{\catcode`\|=\active
  \xdef\Braket{\protect\expandafter\noexpand\csname Braket \endcsname}
  \expandafter\gdef\csname Braket \endcsname#1{\begingroup
     \ifx\SavedDoubleVert\relax
       \let\SavedDoubleVert\|\let\|\BraDoubleVert
     \fi
     \mathcode`\|32768\let|\BraVert
     \left\langle{#1}\right\rangle\endgroup}
}
\def\BraVert{\@ifnextchar|{\|\@gobble}% turn || into \|
     {\egroup\,\mid@vertical\,\bgroup}}
\def\BraDoubleVert{\egroup\,\mid@dblvertical\,\bgroup}
\let\SavedDoubleVert\relax
% If the user is using e-TeX with its \middle primitive, use that for
% verticals instead of \vrule.
%
\begingroup
 \edef\@tempa{\meaning\middle}
 \edef\@tempb{\string\middle}
\expandafter \endgroup \ifx\@tempa\@tempb
 \def\mid@vertical{\middle|}
 \def\mid@dblvertical{\middle\SavedDoubleVert}
\else
 \def\mid@vertical{\mskip1mu\vrule\mskip1mu}
 \def\mid@dblvertical{\mskip1mu\vrule\mskip2.5mu\vrule\mskip1mu}
\fi
% %%%%%%%%%%%% \LBraket -- for Liouville brakets  %%%%%%%%%
% http://tex.stackexchange.com/questions/32794/bracket-with-doubled-delimiters
\makeatletter
\def\LB@add@@{\aftergroup\LB@add@}
\def\LB@add@{\aftergroup\LB@add}
\def\LB@add{\advance\@tempcnta\@ne}
\def\LB@barsl{\ifcase\@tempcnta\or
  \kern-\nulldelimiterspace\left.\or
  \kern-2\nulldelimiterspace\left.\left.\fi}
\def\LB@barsr{\ifcase\@tempcnta\or
  \right.\kern-\nulldelimiterspace\or
  \right.\right.\kern-2\nulldelimiterspace\fi}
\def\LBlleft#1#2\LBrright{\begingroup
  % count the number of bars
  \mathcode`|="8000
  \begingroup\lccode`~=`| \lowercase{\endgroup\def~}{\aftergroup\LB@add@@}
  \@tempcnta=\z@\setbox\z@=\hbox{$\left<#2\right>$}
  % now \@tempcnta has the number of bars and we redefine |
  \begingroup\lccode`~=`| \lowercase{\endgroup\def~}{\nonscript\;\middle|\nonscript\;}
  \def\ts@r{\nulldelimiterspace=0pt \mathsurround=0pt}%
  \let\@hat=#1%
  \def\sht@im{\LB@barsl#2\LB@barsr}%
  \def\@t{{\mathchoice{\def\@fen{\displaystyle}\k@fel}%
          {\def\@fen{\textstyle}\k@fel}%
          {\def\@fen{\scriptstyle}\k@fel}%
          {\def\@fen{\scriptscriptstyle}\k@fel}}}%
   \def\g@rin{\ts@r\left\@hat\vphantom{\sht@im}\right.}%
   \def\k@fel{\setbox0=\hbox{$\@fen\g@rin$}\hbox{%
      $\@fen \kern.3875\wd0 \copy0 \kern-.3875\wd0
      \llap{\copy0}\kern.3875\wd0$}}%
      \def\pt@h{\mathopen\@t}\pt@h\sht@im
      \LBrright}%
\def\LBrright#1{\let\@hat=#1%
   \def\st@m{\mathclose\@t}%
   \st@m\endgroup}
\DeclareRobustCommand\LBraket[1]{\LBlleft<#1\LBrright>}
\makeatother
% If the user is using e-TeX with its \middle primitive, use that for
% verticals instead of \vrule.
%
\begingroup
 \edef\@tempa{\meaning\middle}
 \edef\@tempb{\string\middle}
\expandafter \endgroup \ifx\@tempa\@tempb
 \def\mid@vertical{\middle|}
 \def\mid@dblvertical{\middle\SavedDoubleVert}
\else
 \def\mid@vertical{\mskip1mu\vrule\mskip1mu}
 \def\mid@dblvertical{\mskip1mu\vrule\mskip2.5mu\vrule\mskip1mu}
\fi

%%%%%% General double delimiters. %%%%%%
% e.g. \\lleft\langle \\rright\rangle -> << >>
% see http://newsgroups.derkeiler.com/Archive/Comp/comp.text.tex/2010-05/msg00245.html
% and http://goo.gl/HPvxm
\catcode`@=11
\def\lleft#1#2\rright{\begingroup%
   \def\ts@r{\nulldelimiterspace=0pt \mathsurround=0pt}%
   \let\@hat=#1%
   \def\sht@im{#2}%
   \def\@t{{\mathchoice{\def\@fen{\displaystyle}\k@fel}%
          {\def\@fen{\textstyle}\k@fel}%
          {\def\@fen{\scriptstyle}\k@fel}%
          {\def\@fen{\scriptscriptstyle}\k@fel}}}%
   \def\g@rin{\ts@r\left\@hat\vphantom{\sht@im}\right.}%
   \def\k@fel{\setbox0=\hbox{$\@fen\g@rin$}\hbox{%
      $\@fen \kern.3875\wd0 \copy0 \kern-.3875\wd0%
      \llap{\copy0}\kern.3875\wd0$}}%
      \def\pt@h{\mathopen\@t}\pt@h\sht@im%
      \rright}%
\def\rright#1{\let\@hat=#1%
   \def\st@m{\mathclose\@t}%
   \st@m\endgroup}
\catcode`@=12

\ProcessOptions\relax
